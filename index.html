<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yiddish Dialect Dictionary</title>
    <script src="https://cdn.jsdelivr.net/npm/minisearch@6.1.0/dist/umd/index.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input { margin-bottom: 20px; width: 300px; padding: 8px; }
        #results { margin-top: 20px; }
        a { text-decoration: none; color: blue; font-size: 18px; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>Yiddish Dialect Dictionary</h1>
    <input type="text" id="search" placeholder="Search for words...">
    <div id="results"></div>

    <script>
        // Confirm if MiniSearch is loading
        if (typeof MiniSearch === 'undefined') {
            alert('MiniSearch failed to load. Check your internet connection.');
        } else {
            console.log('MiniSearch loaded successfully.');
        }

        // File list: Add all the words and correct paths here
        const files = [
            { id: 1, title: "ערהיט", url: "-ayin-עין/-ערהיט.html" },
            { id: 2, title: "אפְשׁר", url: "-ayin-עין/-אפְשׁר.html" },
            { id: 3, title: "עבֶד", url: "-ayin-עין/-עבֶד.html" },
            { id: 4, title: "עבֶודְה", url: "-ayin-עין/-עבֶודְה.html" },
            { id: 5, title: "עבֶודְהזרָה", url: "-ayin-עין/-עבֶודְהזרָה.html" }
        ];

        // Initialize MiniSearch
        const miniSearch = new MiniSearch({
            idField: 'id',            // Use 'id' as the unique identifier
            fields: ['title'],        // Fields to index for search
            storeFields: ['title', 'url']  // Fields to return in search results
        });

        // Add all files to the search index
        miniSearch.addAll(files);

        console.log('MiniSearch index:', miniSearch); // Debugging output

        // DOM Elements
        const searchInput = document.getElementById('search');
        const resultsDiv = document.getElementById('results');

        // Search function
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim(); // Get search query
            console.log('Search query:', query); // Debugging output

            const results = miniSearch.search(query); // Perform search
            console.log('Search results:', results); // Debugging output

            // Clear previous results
            resultsDiv.innerHTML = '';

            // Display new results
            if (results.length > 0) {
                results.forEach(result => {
                    const link = document.createElement('a');
                    link.href = result.url;
                    link.textContent = result.title;
                    link.target = '_blank';
                    resultsDiv.appendChild(link);
                    resultsDiv.appendChild(document.createElement('br'));
                });
            } else if (query) {
                resultsDiv.textContent = 'No results found.';
            }
        });
    </script>
</body>
</html>
